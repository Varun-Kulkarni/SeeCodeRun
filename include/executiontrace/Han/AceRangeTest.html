
<html>
	<head>
	    <!-- Init Scripts for Execution Trace API !-->
	    <script src="../David/scripts/esprima.js" type="text/javascript" charset="utf-8"></script>
	    <script src="../David/scripts/escodegen.browser.js" type="text/javascript" charset="utf-8"></script>
	    <script src="../David/scripts/esmorph.js" type="text/javascript" charset="utf-8"></script>
	    <script src="../David/scripts/executiontrace.js" type="text/javascript" charset="utf-8"></script>
	    <!-- End Scripts for Execution Trace API !-->
	    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.3/ace.js" type="text/javascript" charset="utf-8"></script>
		<script src="ExecutionTraceInterface.js"></script>
	    <style>
	    #editor { 
	        position: absolute;
	        top: 30;
	        right: 250;
	        bottom: 250;
	        left: 5;
	    }
	    </style>
	</head>
	<body>
        <h3>Simple Range Value Function Testing (getValues(Range))</h3>
        <!--<input type = "hidden" id = "mockCode" placeholder="enter test code here">var x = 5;</input>
        <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
        <table border=1>
            <tr>
                <td></td>
                <td id>Row</td>
                <td id>Col</td>
            </tr>            
            <tr>
                <td>Start</td>
                <td id = "sr"></td>
                <td id = "sc"></td>
            </tr>
            <tr>
                <td>End</td>
                <td id = "er"></td>
                <td id = "ec"></td>
            </tr>
        </table><br/><br/>
        <input id = "inputRange" type = "text" size="30" placeholder="startRow startCol endRow endCol"/><br/><br/>
        <div id = "resultContainer">Results:</div>
        <div id = "currentPos">curPos: </div>-->
        <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
        <div id = "status">Values On Hover-over: <br/></div>
<div id="editor">var x = 5;var y = 10;
var z = [1,2,3];
</div>

	<script>
		$("#status").css("font-size","20px")
		// initiating the editor
	    var editor = ace.edit("editor");
	    editor.setTheme("ace/theme/monokai");
	    editor.getSession().setMode("ace/mode/javascript");
	    editor.renderer.setShowGutter(true);
    
        editor.on("mousemove",function(e){
            var acePos = e.getDocumentPosition();
            var valuesOfCurrentLine;
            //getLineValues(acePosUseForRangeWrapper.row+1);
            var eti = new ExecutionTraceInterface(editor.getSession().getDocument().getValue());
        	if(eti.linkEstablished){
        		valuesOfCurrentLine = eti.getLineValues(acePos.row+1);
        	}
        	$("#status").text("Values On Hover-over: "+JSON.stringify(valuesOfCurrentLine));
        });
        


        // precondition: line number should start with 1
/*        function getLineValues(lineNumber){
        	lineNumber--; // aces starts with row = 0;
        	var sourceCode = editor.getSession().getDocument().getValue();
        	var stackTrace, valueTable;
        	var returnValues;
	    	window.traceExecution(sourceCode,
                function eventListener (event){
                    if(event.status === "Finished"){
                        stackTrace = window.TRACE.getStackTrace();
                        valueTable = window.TRACE.getExecutionTrace();
                    }
			});
			var i,entry,ele;
            //alert(Object.keys(valueTable[0]));
            for(i=0;i<valueTable.length;i++){
            	entry = valueTable[i]
                //var keys = Object.keys(valueTable[entry]);
                if(entry.hasOwnProperty("range")){
                    if(entry.range.start.row===lineNumber){
                    	getValues(entry.range);
                    }
                }
            }
        }
        
        function getValues(Range){
			
        }*/
        
	</script>

	</body>
</html>